(function(i,e,a,t){i.fn.wcsvi_variation_form=function(){var i=this,e=i.data("product_variations"),a=false;i.on("click",".reset_variations",function(i){i.preventDefault();a=true;WOOSVI.STARTS.loadImages(true);WOOSVI.STARTS.imagesLoaded(true);setTimeout(function(){a=false},500)}).on("show_variation",function(i,e,a){WOOSVI.STARTS.showVariation()}).on("change",".variations select",function(){}).on("focusin touchstart",".variations select",function(){a=false}).on("found_variation",function(i,e){}).on("check_variations",function(i,e,a){}).on("update_variation_values",function(i,e){});i.trigger("wc_variation_form");return i};i(function(){if(typeof wc_add_to_cart_variation_params!=="undefined"){i(".variations_form").each(function(){i(this).wcsvi_variation_form()})}WOOSVI.STARTS.init()})})(jQuery,window,document);if(!WOOSVI){var WOOSVI={}}else{if(WOOSVI&&typeof WOOSVI!=="object"){throw new Error("WOOSVI is not an Object type")}}jQuery.noConflict();WOOSVI.STARTS=function(i,e,a,t){var n=i("form.variations_form");var s=i("div#woosvi_strap");var o=false;var r=n.find(".variations select").length>0;var l='<img src="{{image_src}}" alt="{{image_alt}}" title="{{image_title}}" data-svikey="{{image_svikey}}" data-woosvislug="{{image_woosvislug}}" data-svizoom-image="{{image_svizoom}}" srcset="{{image_srcset}}" sizes="{{image_sizes}}" width="{{image_width}}" height="{{image_height}}">';var u=WOOSVIDATA.hide_thumbs=="1";var m=WOOSVIDATA.lens=="1";var d=WOOSVIDATA.lightbox=="1";var v=false;var f=false;var g=typeof WOOSVIDATA.gallery.thumbs!=="undefined"&&WOOSVIDATA.gallery.thumbs.length>0;var c=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase());var O=navigator.userAgent.indexOf("Chrome")>-1;var S=navigator.userAgent.indexOf("MSIE")>-1;var T=navigator.userAgent.indexOf("Firefox")>-1;var h=navigator.userAgent.indexOf("Safari")>-1;var A=navigator.userAgent.toLowerCase().indexOf("op")>-1;var p=n.find(".reset_variations");var I=WOOSVIDATA.imagesloaded=="1";return{NAME:"Application initialize module",VERSION:WOOSVIDATA.jsversion,init:function(){if(c){m=false}if(typeof wc_add_to_cart_variation_params==="undefined"){u=false}var i=" columns-"+WOOSVIDATA.columns;if(s.find("ul.svithumbnails li").length>0){s.find("ul.svithumbnails li").remove()}else{s.find("div#woosvithumbs").prepend('<ul class="svithumbnails'+i+'"></ul>')}if(u){s.find("div#woosvithumbs").hide()}WOOSVI.STARTS.loadImages();WOOSVI.STARTS.imagesLoaded();WOOSVI.STARTS.ActivateSwapImage();WOOSVI.STARTS.prettyPhoto()},reset:function(){},setupThumbNavs:function(){setTimeout(function(){var e=i("#woosvithumbs");console.log(e.find("li"),e.find("li").length);if(e.find("li").length<3)return;e.after('<div class="getled-gallery-nav gallery-nav-prev"><i class="fa fa-chevron-up"></i></div>').after('<div class="getled-gallery-nav gallery-nav-next"><i class="fa fa-chevron-down"></i></div>');e.siblings(".getled-gallery-nav").off("click").on("click",function(){var a=i(this),t=e.find("li").outerHeight()+20;if(a.attr("class").indexOf("prev")>-1){t="-="+t}else{t="+="+t}e.animate({scrollTop:t},"fast")})},250)},loadImages:function(e){if(e){f=false}s.find("div#woosvimain").html("");s.find("ul.svithumbnails li").remove();i("div#woosvimain").prepend('<div class="sviLoader_thumb"></div>');var a=WOOSVI.STARTS.getActiveVariationsInSelect();if(a.length>0&&!e){WOOSVI.STARTS.showVariation();return}if(!r&&WOOSVIDATA.gallery.thumbs){if(WOOSVIDATA.gallery.main_image){i("div#woosvimain").append(i(WOOSVI.STARTS.buildImgTag(WOOSVIDATA.gallery.main_image.fullimg)))}else if(g){i("div#woosvimain").append(i(WOOSVI.STARTS.buildImgTag(WOOSVIDATA.gallery.thumbs[0].fullimg)))}}if(!WOOSVIDATA.gallery.thumbs&&i("div#woosvimain img").length<1){if(WOOSVIDATA.gallery.main_image){i("div#woosvimain").append(i(WOOSVI.STARTS.buildImgTag(WOOSVIDATA.gallery.main_image.fullimg)))}else if(g){i("div#woosvimain").append(i(WOOSVI.STARTS.buildImgTag(WOOSVIDATA.gallery.thumbs[0].fullimg)))}}if(r&&i("div#woosvimain img").length<1){if(WOOSVIDATA.gallery.main_image){i("div#woosvimain").append(i(WOOSVI.STARTS.buildImgTag(WOOSVIDATA.gallery.main_image.fullimg)))}else if(g){i("div#woosvimain").append(i(WOOSVI.STARTS.buildImgTag(WOOSVIDATA.gallery.thumbs[0].fullimg)))}}WOOSVI.STARTS.loadThumb(WOOSVIDATA.gallery.thumbs,false);WOOSVI.STARTS.reOrderThumbs()},buildImgTag:function(i){if(typeof i!=="undefined"){return l.replace(/{{image_src}}/g,i.src).replace("{{image_class}}",i.class).replace("{{image_alt}}",i.alt).replace("{{image_title}}",i.title).replace("{{image_woosvislug}}",i["data-woosvislug"]).replace("{{image_svizoom}}",i["data-svizoom-image"]).replace("{{image_svikey}}",i["data-svikey"]).replace("{{image_srcset}}",i.srcset?i.srcset:"").replace("{{image_sizes}}",i.sizes?i.sizes:"").replace("{{image_width}}",i.width?i.width:"").replace("{{image_height}}",i.height?i.height:"")}},loadMain:function(e){if(!e){return}var a=[""];var t=WOOSVI.STARTS.itemBuilder(e,a,true);s.find("ul.svithumbnails").append(i(t))},loadThumb:function(e,a){if(!e){if(!a){WOOSVI.STARTS.loadMain(WOOSVIDATA.gallery.main_image);WOOSVI.STARTS.setupThumbNavs()}return}var t=Object.keys(e).length;if(!a){WOOSVI.STARTS.loadMain(WOOSVIDATA.gallery.main_image)}WOOSVI.STARTS.reset();jQuery.each(e,function(e,a){var n="";var o="";var r=[""];var l,u;var m=s.find("ul.svithumbnails li").size();if(m===0||m%WOOSVIDATA.columns===0){r.push("first")}if((m+1)%WOOSVIDATA.columns===0){r.push("last")}if(m===t){r.push("last")}n=WOOSVI.STARTS.itemBuilder(a,r);l=s.find("ul.svithumbnails li").map(function(){if(i(this).data("thumb")===i(n).data("thumb")){return true}}).get();if(jQuery.isEmptyObject(l)){s.find("ul.svithumbnails").append(i(n))}});WOOSVI.STARTS.setupThumbNavs()},reOrderThumbs:function(){jQuery.each(s.find("ul.svithumbnails li"),function(e,a){var t=[""];if(e===0||e%WOOSVIDATA.columns===0){t.push("first")}if((e+1)%WOOSVIDATA.columns===0){t.push("last")}i(a).removeClass("first_pre").removeClass("first").removeClass("last").addClass(t.join(" "))})},itemBuilder:function(i,e,a){var t="";t+='<li data-thumb="'+i.thumb[0]+'" data-src="'+i.full[0]+'" class="'+e.join(" ")+'">';t+='<div class="sviLoader_thumb"></div>';t+=WOOSVI.STARTS.buildImgTag(i.thumbimg);t+="</li>";return t},imagesLoaded:function(e){if(e){f=false}if(o){return}if(I){i.getScript("//cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.1/imagesloaded.pkgd.min.js").done(function(i,a){WOOSVI.STARTS.runImageProcess(e)}).fail(function(e,a,t){i("div.log").text("Triggered ajaxError handler.")})}else{WOOSVI.STARTS.runImageProcess(e)}},runImageProcess:function(e){o=true;s.imagesLoaded().always(function(a){s.find(".sviLoader_thumb").fadeOut().remove();if(i(".sivmainloader").length>0){i(".sivmainloader").fadeOut("fast",function(){s.find(".svihidden").removeClass("svihidden");WOOSVI.STARTS.completeAction(e)}).remove()}else{s.removeClass("svihidden");WOOSVI.STARTS.completeAction(e)}}).done(function(i){}).progress(function(i,e){}).fail(function(){s.find(".sviLoader_thumb").fadeOut().remove();o=false})},completeAction:function(e){if(e){if(u){s.find("div#woosvithumbs").hide()}}s.find(".sviLoader_thumb").fadeOut().remove();o=false;WOOSVI.STARTS.LoadLens();if(!v&&d){v=true;i('a[rel^="prettyphoto"], .prettyphoto').prettyPhoto({hook:"data-rel",social_tools:false,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:false})}},showVariation:function(e){f=false;var a=[];i.each(WOOSVI.STARTS.getActiveVariationsInSelect(),function(i,e){var t=e.replace(/ /g,"").toLowerCase();if(!t){WOOSVI.STARTS.getActiveVariationsInSelect();return false}var n=WOOSVI.STARTS.getVariationImages(t);if(n){a=a.concat(n)}});if(a.length>0){s.find("ul.svithumbnails li").remove();if(u){s.find("div#woosvithumbs").show()}s.find("div#woosvimain").html("").prepend(i(WOOSVI.STARTS.buildImgTag(a[0].fullimg)));WOOSVI.STARTS.loadThumb(a,true);WOOSVI.STARTS.reOrderThumbs();WOOSVI.STARTS.imagesLoaded();WOOSVI.STARTS.setupThumbNavs()}else{$is_reset=true;WOOSVI.STARTS.loadImages(true);WOOSVI.STARTS.imagesLoaded(true);setTimeout(function(){$is_reset=false},500)}},getActiveVariationsInSelect:function(){var i=n.find(".variations select").map(function(){if(this.value!==""){return decodeURI(this.value)}}).get();return i},getVariationImages:function(i){var e=[];if(i){jQuery.each(WOOSVIDATA.gallery.thumbs,function(a,t){if(t.woosvi_slug&&decodeURIComponent(t.woosvi_slug.replace(/ /g,"").toLowerCase())==i){e.push(t)}});if(WOOSVIDATA.gallery.main_image.woosvi_slug&&decodeURIComponent(WOOSVIDATA.gallery.main_image.woosvi_slug.replace(/ /g,"").toLowerCase())==i){e.push(WOOSVIDATA.gallery.main_image)}var a=Object.keys(e).length;if(a>0){return e}else{return false}}},ActivateSwapImage:function(){s.on("click","ul.svithumbnails img",function(i){WOOSVI.STARTS.initSwap(this)})},initSwap:function(e){var a=i(e).data("svikey");var t=false;if(a>=0){t=WOOSVIDATA.gallery.thumbs[a]}var n=new Image;if(t){n.src=t.single[0]}else{t=WOOSVIDATA.gallery.main_image;n.src=t.single[0]}if(i("div#woosvimain img").attr("src")!=n.src){i("div#woosvimain").prepend('<div class="sviLoader_thumb"></div>');i(n).on("load",function(){i("div#woosvimain img").fadeOut("fast").remove();i("div#woosvimain").prepend(i(WOOSVI.STARTS.buildImgTag(t.fullimg)).hide());i("div#woosvimain img").fadeIn("fast");i("div#woosvimain").find(".sviLoader_thumb").fadeOut().remove();i("div.sviLoader_thumb").remove();f=false;WOOSVI.STARTS.LoadLens()})}},LoadLens:function(){if(!m){return}if(f){return}f=true;i("div.sviZoomContainer").remove();var e,a;e=i("div#woosvimain .swiper-slide-active img, div#woosvimain>img");a={container:"sviZoomContainer",attrImageZoomSrc:"svizoom-image",zoomType:"lens",lensShape:"round",lensSize:150,cursor:"pointer",galleryActiveClass:"active",containLensZoom:true,loadingIcon:true,zIndex:1e3};e.ezPlus(a)},prettyPhoto:function(){if(!d){return}s.on("click","div#woosvimain img",function(e){e.preventDefault();var a=i(this).data("svizoom-image");var t=i(this).attr("title");var n=[];var s=[];i("div#woosvithumbs ul.svithumbnails li, div#woosvithumbs .swiper-slide").each(function(e,a){var t=i(this).find("img").data("svikey");var o=false;if(t>=0){o=WOOSVIDATA.gallery.thumbs[t]}if(o){n.push(o.full[0]);s.push(i(this).find("img").attr("title"))}else{n.push(WOOSVIDATA.gallery.main_image.full[0]);s.push(i(this).find("img").attr("title"))}});if(jQuery.isEmptyObject(n)){n.push(a);s.push(t)}jQuery.prettyPhoto.open(n,s);i("div.pp_gallery").find('img[src="'+a+'"]').parent().trigger("click")})}}}(jQuery,window,document);