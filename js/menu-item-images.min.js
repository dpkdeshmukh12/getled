jQuery(function(e){var i,a=e("body");a.on("change",'input[name*="menu-item-image"]',function(i){e(this).siblings("img").attr("src",this.value)});a.on("click",".getled-select-image",function(a){a.preventDefault();if(i){i.open()}else{i=wp.media.frames.getledFileFrame=wp.media({title:"Choose menu item image",button:{text:"Select Image"},multiple:false});i.on("select",function(){attachment=i.state().get("selection").first().toJSON();console.log(attachment);i.$textField.val(attachment.sizes.thumbnail.url).change()});i.open()}i.$textField=e(this).siblings('input[name*="menu-item-image"]')});e(".menu-item .field-css-classes").each(function(){var i=e(this),a=i.find("input"),t=e("<input/>").attr("type","checkbox"),n=e("<p/>").html("<label> Hide label</label>").addClass("field-hide-label description description-wide");t.addClass("enable-hide-label");if(-1<a.val().search("hide-label")){t.prop("checked",true)}n.find("label").prepend(t);i.before(n);var s=e('<span class="fa fa-preview"></span>'),l=e('<label class="pick-fa-icon button button-primary"><input type="text" class="fa-icon-input">Choose icon</label>'),n=e('<p><span class="fa-icon-remove button">Remove Icon</span></p>').addClass("field-fa-icon description description-wide");l.addClass("enable-fa-picker");if(-1<a.val().indexOf("fa-")){e.each(a.val().split(" "),function(e,i){if(-1<i.indexOf("fa-")){s.addClass(i)}})}n.prepend(l.prepend(s));i.before(n)});e(".fa-icon-input").iconpicker().on("iconpickerUpdated",function(){var i=e(this),a=i.siblings(".fa-preview"),t=i.closest(".menu-item-settings").find(".fa-icon-remove"),n=i.closest(".menu-item-settings").find(".field-css-classes input"),s=[];t.click();s=n.val().split(" ");if(i.val()){s.push(i.val());a.addClass(i.val())}n.val(s.join(" "))});e(".fa-icon-remove").click(function(){var i=e(this),a=i.parent().find(".fa-preview"),t=i.closest(".menu-item-settings").find(".field-css-classes input"),n=t.val().split(" "),s=[];e.each(n,function(e,i){if(i&&-1==i.indexOf("fa-")){s.push(i)}});a.attr("class","fa fa-preview");t.val(s.join(" "))})});